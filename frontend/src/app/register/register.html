<app-nav></app-nav>

<div class="container mt-5 d-flex justify-content-center">
  <form (ngSubmit)="registro()" class="card p-4 shadow-lg mi-form" style="width: 420px; border-radius: 1rem; background-color: #f8f9fa;">
    <h2 class="mb-4 text-center fw-bold text-primary">Registrate</h2>

    <div class="text-center mb-3">
      
      <div class="position-relative d-inline-block">
        <p>Selecciona tu foto de perfil</p>
        <label for="imagen" class="form-label fw-semibold"><img 
          [src]="imageUrl" 
          alt="" 
          width="120" 
          height="120" 
          class="rounded-circle border border-3 border-primary mb-2"
          style="object-fit: cover;"
        ></label>
        <input id="imagen" type="file" accept="image/*" (change)="selectImage($event)" hidden>
        @if(imagenError){
          <p class="error text-danger small mb-2">{{errorMessageFile}}</p>
        }
        @if(!image){
          <p class="error text-danger small mb-2">{{errorMessageImagen}}</p>
        }
      </div>
      
    </div>

    <input [(ngModel)]="nombre" name="nombre" type="text" placeholder="Nombre" required class="form-control mb-2">
    @if(!nombre){
      <p class="error text-danger small mb-2">{{errorMessageNombre}}</p>
    }

    <input [(ngModel)]="apellido" name="apellido" type="text" placeholder="Apellido" required class="form-control mb-2">
    @if(!apellido){
      <p class="error text-danger small mb-2">{{errorMessageNombre}}</p>
    }

    <input [(ngModel)]="fecha_nacimiento" name="fecha_nacimiento" type="date" required class="form-control mb-2">
    @if(!fecha_nacimiento){
      <p class="error text-danger small mb-2">{{errorMessageNacimiento}}</p>
    }

    <input [(ngModel)]="email" name="email" type="email" placeholder="Correo electrónico" required class="form-control mb-2">
    @if(!email){
      <p class="error text-danger small mb-2">{{errorMessageEmail}}</p>
    }

    <input [(ngModel)]="username" name="username" type="text" placeholder="Nombre de usuario" required class="form-control mb-2">
    @if(!username){
      <p class="error text-danger small mb-2">{{errorMessageUsername}}</p>
    }

    <input [(ngModel)]="password" name="password" type="password" placeholder="Contraseña" required class="form-control mb-2">
    @if(!password){
      <p class="error text-danger small mb-2">{{errorMessageConstrasena}}</p>
    }

    

    <input [(ngModel)]="password2" name="password2" type="password" placeholder="Repetir contraseña" required class="form-control mb-2">
    @if(!password2){
      <p class="error text-danger small mb-2">{{errorMessageConstrasena}}</p>
    }

    @if(password !== password2){
      <p class="error text-danger small mb-2">{{errorMessageConstrasenas}}</p>
    }

    <textarea [(ngModel)]="descripcion" name="descripcion" rows="3" placeholder="Descripción" required class="form-control mb-3"></textarea>
    @if(!descripcion){
      <p class="error text-danger small mb-2">{{errorMessageDescripcion}}</p>
    }

    <p class="text-success text-center fw-semibold">{{mensajeExito}}</p>

    @if(error){
      <p class="error text-danger small mb-2">{{errorMessage}}</p>
    }

    <button type="submit" class="btn btn-primary w-100 mi-boton mb-3" style="border-radius: 50px; transition: 0.3s;">
      Registrarse
    </button>

    <div class="text-center">
      <a class="link-login text-decoration-none" routerLink='/login'>
        ¿Ya tenés una cuenta? Iniciá sesión
      </a>
    </div>
  </form>
</div>
